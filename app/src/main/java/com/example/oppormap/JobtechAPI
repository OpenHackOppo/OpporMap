package com.example.oppormap;

import androidx.annotation.NonNull;
import androidx.appcompat.app.AppCompatActivity;

import android.os.Bundle;
import android.widget.TextView;

import com.android.volley.AuthFailureError;
import com.android.volley.Request;
import com.android.volley.RequestQueue;
import com.android.volley.Response;
import com.android.volley.VolleyError;
import com.android.volley.toolbox.StringRequest;
import com.android.volley.toolbox.Volley;

import java.util.HashMap;
import java.util.Map;

public class JobtechAPI {
    //API-managing queue
    private RequestQueue apiqueue = Volley.newRequestQueue(this);
    final TextView textView = (TextView) findViewById(R.id.text);

    private String ylatcoor = "59.3338483";
    private String xloncoor = "18.0735157";
    private String joblisturl= "https://jobsearch.api.jobtechdev.se/search?offset=0&limit=30&position="+ylatcoor+","+xloncoor+"&position.radius=1";
    //Test coordinates from Birger Jarlsgatan 7, Stockholm. 1 km radius, returns 30 jobs.
    //Example from Jobtech: https://jobsearch.api.jobtechdev.se/search?offset=0&limit=10&position=59.3,17.6&position.radius=10


    public Map getHeaders() {
        HashMap headers = new HashMap();
        headers.put("Content-Type", "application/json");
        headers.put("api-key", "YW50b24uZWhsZXJ0QGdtYWlsLmNvbQ");
        return headers;
    }


    public void addToQueue(StringRequest stri)
    {
        SimpleRest
        Map headers = getHeaders();
        // Add the request to the RequestQueue
        apiqueue.add(stri);
    }

    public void createStriReq(String url, int results, int radius)
    {

        //Request a string response from the provided URL
        StringRequest strireq = new StringRequest(Request.Method.GET, url,
            new Response.Listener<String>() {
                @Override
                public void onResponse(String response) {
                    // Display the first 500 characters of the response string.
                    textView.setText("Response is: "+ response);
                }
            }, new Response.ErrorListener() {
        @Override
        public void onErrorResponse(VolleyError error) {
            textView.setText("Something went wrong");
        }
    });

    }


}

